<!DOCTYPE html>
<html lang="en">
<head>
  <title>Aviya Magnus - Education Template</title>
  <meta charset="UTF-8" />
  <meta name="description" content="Aviya Magnus Education Template" />
  <meta name="keywords" content="Aviya Magnus, education, creative, html" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Favicon -->
  <link href="img/favicon.ico" rel="shortcut icon" />

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css?family=Raleway:400,400i,500,500i,600,600i,700,700i,800,800i"
    rel="stylesheet"
  />

  <!-- Stylesheets -->
  <link rel="stylesheet" href="css/bootstrap.min.css" />
  <link rel="stylesheet" href="css/font-awesome.min.css" />
  <link rel="stylesheet" href="css/owl.carousel.css" />
  <link rel="stylesheet" href="css/style.css" />
  <style>
    /* Simple error message style */
    .error-message {
      color: red;
      display: none;
      margin-top: 5px;
      font-size: 0.9em;
    }
  </style>
</head>
<body>
  <!-- Page Preloader -->
  <div id="preloder">
    <div class="loader"></div>
  </div>

  <!-- Header section -->
  <header class="header-section">
    <div class="container">
      <div class="row">
        <div class="col-lg-3 col-md-3">
          <div class="site-logo">
            <img src="img/logo.png" alt="" />
          </div>
          <div class="nav-switch">
            <i class="fa fa-bars"></i>
          </div>
        </div>
        <div class="col-lg-9 col-md-9">
          <nav class="main-menu">
            <ul></ul>
          </nav>
        </div>
      </div>
    </div>
  </header>
  <!-- Header section end -->

  <!-- Hero section -->
  <section class="hero-section set-bg" data-setbg="img/bg.jpg">
    <div class="container">
      <h2 id="signup-title">Join Aviya Magnus</h2>
      <p>Start your learning journey â€” Create your free account today.</p>

      <form id="signupForm" class="signup-form" novalidate>
        <select name="role" id="role" required>
          <option value="">Select Role</option>
          <option value="student">Student</option>
          <option value="parent">Parent</option>
          <option value="tutor">Tutor</option>
        </select>

        <div class="row" style="margin-top:10px;">
          <div class="col-md-6">
            <input
              type="text"
              id="firstName"
              name="firstName"
              placeholder="First Name"
              required
            />
          </div>
          <div class="col-md-6">
            <input
              type="text"
              id="lastName"
              name="lastName"
              placeholder="Last Name"
              required
            />
          </div>
        </div>

        <input
          type="password"
          id="password"
          name="password"
          placeholder="Password"
          required
          style="margin-top:10px;"
        />
        <input
          type="password"
          id="confirmPassword"
          name="confirmPassword"
          placeholder="Re-enter Password"
          required
        />
        <p class="error-message" id="passwordError">
          Passwords do not match! Please re-enter.
        </p>

        <input
          type="email"
          id="email"
          name="email"
          placeholder="Enter your email"
          required
          style="margin-top:10px;"
        />

        <div
          style="
            display: flex;
            gap: 10px;
            margin-top: 10px;
            align-items: center;
          "
        >
          <select
            id="countryCode"
            name="countryCode"
            required
            style="
              width: 30%;
              padding: 12px 10px;
              border-radius: 5px;
              border: none;
              background: rgba(255, 255, 255, 0.9);
              color: #000;
              font-size: 16px;
            "
          >
            <option value="">Code</option>
            <option value="+91">ðŸ‡®ðŸ‡³ +91</option>
            <option value="+1">ðŸ‡ºðŸ‡¸ +1</option>
            <option value="+44">ðŸ‡¬ðŸ‡§ +44</option>
            <option value="+61">ðŸ‡¦ðŸ‡º +61</option>
            <option value="+971">ðŸ‡¦ðŸ‡ª +971</option>
          </select>
          <input
            type="tel"
            id="mobile"
            name="mobile"
            placeholder="Mobile Number"
            pattern="[0-9]{10,15}"
            required
            style="
              width: 70%;
              padding: 12px 15px;
              border-radius: 5px;
              border: none;
              background: rgba(255, 255, 255, 0.9);
              color: #000;
              font-size: 16px;
            "
          />
        </div>
        <p class="error-message" id="mobileError">
          Please enter a valid mobile number.
        </p>

        <div class="captcha-box" style="margin-top: 15px;">
          <div
            class="captcha"
            id="captchaText"
            style="
              display: inline-block;
              font-weight: bold;
              font-size: 24px;
              background: #ddd;
              padding: 10px 20px;
              user-select: none;
              letter-spacing: 3px;
            "
          ></div>
          <input
            type="text"
            id="captchaInput"
            placeholder="Enter Captcha"
            required
            style="
              margin-left: 15px;
              padding: 10px;
              font-size: 16px;
              border-radius: 5px;
              border: 1px solid #ccc;
              width: 200px;
            "
          />
        </div>
        <p class="error-message" id="captchaError">
          Captcha mismatch! Please try again.
        </p>

        <button
          type="button"
          class="site-btn"
          style="margin-top: 15px;"
          onclick="validateAndRedirect()"
        >
          Register
        </button>
      </form>
    </div>
  </section>
  <!-- Hero section end-->

  <!-- footer section -->
  <footer class="footer-section spad pb-0" style="margin-top: 50px;">
    <div class="footer-top">
      <div class="footer-warp">
        <div class="row">
          <div class="widget-item">
            <h4>Contact Info</h4>
            <ul class="contact-list">
              <li>1/101, Kavarai Street, Latteri<br />Vellore 632202</li>
              <li>+918248802124</li>
              <li>
                contactus@aviyamagnus.com / monikaanandan@aviyamagnus.com
              </li>
            </ul>
          </div>
          <div class="widget-item">
            <h4>Business Administration</h4>
            <ul>
              <li><a href="">Human Resource</a></li>
              <li><a href="">Marketing & Sales</a></li>
              <li><a href="">Finance & Accounting</a></li>
              <li><a href="">Banking Finance</a></li>
              <li><a href="">Supply Chain Management</a></li>
            </ul>
          </div>
          <div class="widget-item">
            <h4>Business & Management</h4>
            <ul>
              <li><a href="">Operations Management</a></li>
              <li><a href="">Entrepreneurship & Startups</a></li>
              <li><a href="">Business Analytics</a></li>
              <li><a href="">Leadership & Team Management</a></li>
              <li><a href="">Event Management</a></li>
            </ul>
          </div>
          <div class="widget-item">
            <h4>Education & Law</h4>
            <ul>
              <li><a href="">Corporate Law & Intellectual Property Rights</a></li>
              <li><a href="">Labor Law & Industrial Relations</a></li>
              <li><a href="">Contract Management</a></li>
              <li><a href="">Education & Teaching</a></li>
              <li><a href="">Communication & Soft skills</a></li>
            </ul>
          </div>
          <div class="widget-item">
            <h4>Newsletter</h4>
            <form class="footer-newslatter">
              <input type="email" placeholder="E-mail" />
              <button class="site-btn" type="submit">Subscribe</button>
              <p>*We donâ€™t spam</p>
            </form>
          </div>
        </div>
      </div>
    </div>
    <div class="footer-bottom">
      <div class="footer-warp">
        <ul class="footer-menu">
          <li><a href="#">Terms & Conditions</a></li>
          <li><a href="#">Register</a></li>
          <li><a href="#">Privacy</a></li>
        </ul>
        <div class="copyright">
          <!-- Link back to aviyamagnus can't be removed. Template is licensed under CC BY 3.0. -->
          Copyright &copy;<script>document.write(new Date().getFullYear());</script> All
          rights reserved | This template is made with
          <i class="fa fa-heart-o" aria-hidden="true"></i> by
          <a href="https://aviyamagnus.com" target="_blank">aviyamagnus</a>
          <!-- Link back to aviyamagnus can't be removed. Template is licensed under CC BY 3.0. -->
        </div>
      </div>
    </div>
  </footer>
  <!-- footer section end -->

  <!-- JS Files -->
  <script src="js/jquery-3.2.1.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/owl.carousel.min.js"></script>
  <script src="js/main.js"></script>

  <!-- Custom JS -->
  <script>
    // Generate captcha
    function generateCaptcha() {
      const chars = "ABCDEFGHJKLMNPQRSTUVWXYZ23456789";
      let captcha = "";
      for (let i = 0; i < 5; i++) {
        captcha += chars.charAt(Math.floor(Math.random() * chars.length));
      }
      document.getElementById("captchaText").textContent = captcha;
    }

    // Validate form fields and send POST request
    function validateAndRedirect() {
      const form = document.getElementById("signupForm");

      // Hide all error messages initially
      document.getElementById("passwordError").style.display = "none";
      document.getElementById("mobileError").style.display = "none";
      document.getElementById("captchaError").style.display = "none";

      // Basic form validity check (HTML5)
      if (!form.checkValidity()) {
        form.reportValidity();
        return;
      }

      // Password match validation
      const password = document.getElementById("password").value;
      const confirmPassword = document.getElementById("confirmPassword").value;
      if (password !== confirmPassword) {
        document.getElementById("passwordError").style.display = "block";
        return;
      }

      // Mobile number validation (digits only, 10 to 15 digits)
      const mobile = document.getElementById("mobile").value.trim();
      const mobilePattern = /^[0-9]{10,15}$/;
      if (!mobilePattern.test(mobile)) {
        document.getElementById("mobileError").style.display = "block";
        return;
      }

      // Captcha validation
      const captchaText = document.getElementById("captchaText").textContent.trim();
      const captchaInput = document.getElementById("captchaInput").value.trim();
      if (captchaInput.toUpperCase() !== captchaText.toUpperCase()) {
        document.getElementById("captchaError").style.display = "block";
        generateCaptcha();
        return;
      }

      // All validations passed, prepare data to send
      const data = {
        role: document.getElementById("role").value,
        firstName: document.getElementById("firstName").value.trim(),
        lastName: document.getElementById("lastName").value.trim(),
        email: document.getElementById("email").value.trim(),
        countryCode: document.getElementById("countryCode").value,
        mobile: mobile,
        password: password,
      };

      // Send POST request
      fetch("https://aviyamagnus.rf.gd/register.php", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data),
      })
        .then((res) => res.json())
        .then((data) => {
          if (data.message === "User registered successfully!") {
            window.location.href = "success.html";
          } else {
            alert("Error: " + data.message);
          }
        })
        .catch((err) => {
          console.error("Fetch error:", err);
          alert("Server error: " + err.message);
        });
    }

    // Initialize captcha on page load
    window.onload = generateCaptcha;
  </script>
</body>
</html>
