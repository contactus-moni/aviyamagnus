<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Student Dashboard - Aviya Magnus</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* ===== Base Reset ===== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      transition: background 0.3s ease, color 0.3s ease;
    }

    body {
      display: flex;
      height: 100vh;
      overflow: hidden;
    }

    aside, nav, main {
      transition: background 0.4s ease, border-color 0.4s ease, color 0.4s ease;
    }

    /* ===== Layout ===== */
    aside {
      width: 220px;
      padding: 20px;
      border-right: 1px solid;
    }

    nav {
      width: 220px;
      padding: 20px;
      border-left: 1px solid;
    }

    main {
      flex: 1;
      padding: 40px;
      overflow-y: auto;
      font-family: "Bodoni MT", serif; /* âœ… Main content font */
    }

    /* ===== Default Light Theme ===== */
    body[data-theme="light"] {
      color: #000;
    }

    body[data-theme="light"] aside,
    body[data-theme="light"] nav {
      background: linear-gradient(180deg, #f3f3f3, #e4e4e4);
      border-color: #ccc;
      box-shadow: inset 0 0 10px #d6d6d6;
    }

    body[data-theme="light"] main {
      background: linear-gradient(180deg, #ffffff, #f5f5f5);
    }

    /* ===== Dark Theme ===== */
    body[data-theme="dark"] {
      color: #f1f1f1;
    }

    body[data-theme="dark"] aside,
    body[data-theme="dark"] nav {
      background: linear-gradient(180deg, #1a1a1a, #2a2a2a);
      border-color: #333;
      box-shadow: inset 0 0 10px #111;
    }

    body[data-theme="dark"] main {
      background: linear-gradient(180deg, #121212, #1e1e1e);
    }

    /* ===== Header / Controls ===== */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
    }

    .theme-toggle {
      padding: 8px 14px;
      border: 1px solid #888;
      border-radius: 8px;
      cursor: pointer;
      background: transparent;
      color: inherit;
    }

    .theme-toggle:hover {
      opacity: 0.8;
    }

    /* ===== Typography ===== */
    h1, h2, h3 {
      font-family: "Elephant", serif; /* âœ… Headings font */
    }

    /* ===== Sidebar Fonts ===== */
    aside a, aside h1, aside h2 {
      font-family: "Times New Roman", serif; /* âœ… Left navigation font */
    }

    /* ===== Right Pane Fonts ===== */
    #student-profile-pane {
      font-family: "Times New Roman", serif; /* âœ… Right pane font */
    }

    /* ===== Theme Selector ===== */
    .theme-select-box {
      margin-top: 20px;
      padding: 20px;
      background: rgba(0, 0, 0, 0.05);
      border-radius: 12px;
      border: 1px solid #ccc;
      width: 300px;
    }

    body[data-theme="dark"] .theme-select-box {
      background: rgba(255, 255, 255, 0.05);
      border-color: #444;
    }
  </style>
</head>

<body data-theme="light">

  <!-- ===== Sidebar ===== -->
  <aside class="w-64 bg-black border-r border-gray-800 flex flex-col fixed top-0 left-0 h-full overflow-y-auto">
    <div class="text-center py-6 border-b border-gray-800">
      <h1 class="text-2xl font-bold accent">Aviya Magnus</h1>
      <h2 class="text-xl font-bold mb-4 text-[#ff4b5c]">ğŸ“Student Learning Space</h2>

      <a href="#" data-tab="dashboard" class="block px-6 py-3 bg-[#ff4b5c] text-white rounded-l-full font-medium">ğŸ  Dashboard</a>
      <a href="#" data-tab="profile" class="block px-6 py-3 text-gray-400 hover:text-white hover:bg-[#1a1a1a]">ğŸ‘¤ Profile</a>
      <a href="#" data-tab="registration" class="block px-6 py-3 text-gray-400 hover:text-white hover:bg-[#1a1a1a]">âœ”ï¸ Course Registration</a>
      <a href="#" data-tab="courses" class="block px-6 py-3 text-gray-400 hover:text-white hover:bg-[#1a1a1a]">ğŸ“˜ My Courses</a>
      <a href="#" data-tab="documents" class="block px-6 py-3 text-gray-400 hover:text-white hover:bg-[#1a1a1a]">ğŸ“‚ Documents / Notes</a>
      <a href="#" data-tab="video" class="block px-6 py-3 text-gray-400 hover:text-white hover:bg-[#1a1a1a]">ğŸ–¥ï¸ Video Lessons</a>
      <a href="#" data-tab="assignments" class="block px-6 py-3 text-gray-400 hover:text-white hover:bg-[#1a1a1a]">ğŸ—ï¸ Assignments / Tests</a>
      <a href="#" data-tab="meetings" class="block px-6 py-3 text-gray-400 hover:text-white hover:bg-[#1a1a1a]">ğŸ“… Meetings / Calendar</a>
      <a href="#" data-tab="chats" class="block px-6 py-3 text-gray-400 hover:text-white hover:bg-[#1a1a1a]">ğŸ’¬ Chat / Messages</a>
      <a href="#" data-tab="performance" class="block px-6 py-3 text-gray-400 hover:text-white hover:bg-[#1a1a1a]">âœ… Performance Tracker</a>
      <a href="#" data-tab="payment" class="block px-6 py-3 text-gray-400 hover:text-white hover:bg-[#1a1a1a]">ğŸ’¸ Payments</a>
      <a href="#" data-tab="certificates" class="block px-6 py-3 text-gray-400 hover:text-white hover:bg-[#1a1a1a]">ğŸ“ Certificates</a>
      <a href="#" data-tab="support" class="block px-6 py-3 text-gray-400 hover:text-white hover:bg-[#1a1a1a]">ğŸ“ Help / Support</a>
      <a href="#" data-tab="settings" class="block px-6 py-3 text-gray-400 hover:text-white hover:bg-[#1a1a1a]">âš™ï¸ Settings</a>
      <a href="#" data-tab="leadership" class="block px-6 py-3 text-gray-400 hover:text-white hover:bg-[#1a1a1a]">ğŸ† Leaderboard / Achievements</a>
      <a href="#" data-tab="community" class="block px-6 py-3 text-gray-400 hover:text-white hover:bg-[#1a1a1a]">ğŸŒ Community Forum</a>
      <a href="#" data-tab="feedback" class="block px-6 py-3 text-gray-400 hover:text-white hover:bg-[#1a1a1a]">ğŸ“ Feedback / Suggestion Box</a>
    </div>
  </aside>

  <!-- ===== Main Content ===== -->
  <main id="mainContent" class="flex-1 ml-64 mr-80 p-8 overflow-y-auto">
    <h1 class="text-3xl font-bold accent mb-4">Dashboard Overview</h1>
    <p>Welcome to your student dashboard! Select an option from the left menu.</p>
  </main>

  <!-- ===== Right Sidebar (Student Profile Pane) ===== -->
  <aside id="student-profile-pane" class="w-80 border-l border-gray-800 p-6 fixed right-0 top-0 h-full overflow-y-auto transition-all duration-300">
    <div class="mb-8 text-center">
      <img id="studentPhoto" src="img/default-avatar.png" alt="Student Photo"
        class="w-24 h-24 rounded-full mx-auto mb-4 border-4 border-[#ff4b5c] object-cover">
      <h2 id="studentName" class="text-xl font-semibold accent">Student Name</h2>
      <p id="studentEmail" class="text-gray-400 text-sm">student@email.com</p>
    </div>

    <div class="bg-black bg-opacity-30 p-4 rounded-xl mb-6 border border-gray-700">
      <h3 class="font-semibold accent mb-2">ğŸ“‹ Profile Information</h3>
      <ul class="text-gray-300 text-sm space-y-1">
        <li><strong>Mobile:</strong> <span id="studentMobile">+91 00000 00000</span></li>
        <li><strong>Address:</strong> <span id="studentAddress">Not provided</span></li>
        <li><strong>Training Duration:</strong> <span id="trainingMonths">0 months</span></li>
        <li><strong>Payment Status:</strong> <span id="paymentStatus" class="text-yellow-400">Pending</span></li>
      </ul>
    </div>

    <div class="bg-black bg-opacity-30 p-4 rounded-xl mb-6 border border-gray-700">
      <h3 class="font-semibold accent mb-2">ğŸ“Š Progress Overview</h3>
      <ul class="text-gray-300 text-sm space-y-1">
        <li><strong>Current Course:</strong> <span id="currentCourse">N/A</span></li>
        <li><strong>Progress:</strong> <span id="courseProgress">0%</span></li>
        <li><strong>Next Class:</strong> <span id="nextClass">No schedule</span></li>
      </ul>
    </div>

    <div class="bg-black bg-opacity-30 p-4 rounded-xl mb-8 border border-gray-700">
      <h3 class="font-semibold accent mb-3">ğŸ‘¨â€ğŸ« Assigned Mentor</h3>
      <p id="mentorName" class="text-gray-300">To be assigned</p>
      <p id="mentorEmail" class="text-gray-400 text-sm">---</p>
    </div>

    <button onclick="logoutStudent()" class="w-full accent-bg px-4 py-2 rounded-md text-white font-semibold hover:bg-[#e63c4e]">
      ğŸšª Logout
    </button>
  </aside>

  <script>
    const tabs = document.querySelectorAll('aside a[data-tab]');
    const mainContent = document.getElementById('mainContent');

    // Tab switching logic
    tabs.forEach(tab => {
      tab.addEventListener('click', e => {
        e.preventDefault();
        const selectedTab = tab.dataset.tab;

        tabs.forEach(t => t.classList.remove('bg-[#ff4b5c]', 'text-white'));
        tab.classList.add('bg-[#ff4b5c]', 'text-white');

        // Show theme selector only on Settings tab
        if (selectedTab === "settings") {
          mainContent.innerHTML = `
            <h1 class="text-3xl font-bold accent mb-4">âš™ï¸ Settings</h1>
            <div class="theme-select-box">
              <label for="theme-select" class="block mb-2 font-semibold">Choose Theme:</label>
              <select id="theme-select" class="p-2 border rounded-md w-full text-black">
                <option value="light">ğŸŒ Light</option>
                <option value="dark">ğŸŒ™ Dark</option>
              </select>
            </div>
          `;

          const themeSelect = document.getElementById("theme-select");
          themeSelect.value = localStorage.getItem("theme") || "light";
          themeSelect.addEventListener("change", function() {
            setTheme(this.value);
          });
        } else {
          mainContent.innerHTML = `
            <h1 class="text-3xl font-bold accent mb-4">${tab.textContent}</h1>
            <p>Welcome to the <strong>${tab.textContent}</strong> section. Your content will appear here.</p>
          `;
        }
      });
    });

    // Handle theme switching
    function setTheme(theme) {
      document.body.setAttribute("data-theme", theme);
      localStorage.setItem("theme", theme);
    }

    // Apply saved theme on load
    document.addEventListener("DOMContentLoaded", function () {
      const savedTheme = localStorage.getItem("theme") || "light";
      setTheme(savedTheme);
    });

    // Fetch student data
    const token = localStorage.getItem("token");
    fetch("https://aviyamagnus-com.onrender.com/dashboard", {
      headers: token ? { Authorization: `Bearer ${token}` } : {}
    })
    .then(res => res.ok ? res.json() : {})
    .then(data => {
      document.getElementById("studentName").textContent = `${data.first_name || "Student"} ${data.last_name || ""}`.trim();
      document.getElementById("studentEmail").textContent = data.email || "student@email.com";
      document.getElementById("studentMobile").textContent = data.mobile || "+91 00000 00000";
      document.getElementById("studentAddress").textContent = data.address || "Not provided";
      document.getElementById("trainingMonths").textContent = `${data.training_months || 0} months`;
      document.getElementById("paymentStatus").textContent = data.payment_status || "Pending";
      document.getElementById("paymentStatus").classList.add(
        data.payment_status === "Paid" ? "text-green-400" : "text-yellow-400"
      );
      document.getElementById("currentCourse").textContent = data.current_course || "N/A";
      document.getElementById("courseProgress").textContent = `${data.progress || 0}%`;
      document.getElementById("nextClass").textContent = data.next_class || "Not scheduled";
      document.getElementById("mentorName").textContent = data.mentor_name || "To be assigned";
      document.getElementById("mentorEmail").textContent = data.mentor_email || "---";
      if (data.photo_url) document.getElementById("studentPhoto").src = data.photo_url;
    })
    .catch(err => console.error("Error fetching student data:", err));

    // Logout
    function logoutStudent() {
      localStorage.clear();
      alert("You have been logged out.");
      window.location.href = "student-login.html";
    }
  </script>
</body>
</html>
